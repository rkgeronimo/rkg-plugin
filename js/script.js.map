{"version":3,"sources":["Leaflet.EdgeMarker.js","TileLayer.Grayscale.js","script.js"],"names":["L","classToExtend","version","charAt","EdgeMarker","extend","options","distanceOpacity","distanceOpacityFactor","layerGroup","rotateIcons","findEdge","map","bounds","getSize","icon","iconUrl","Icon","Default","imagePath","clickable","iconSize","iconAnchor","initialize","setOptions","this","addTo","_map","_getFeatures","l","out","_layers","getLatLng","push","on","_addEdgeMarkers","addLayer","destroy","_borderMarkerLayer","off","clearLayers","removeLayer","undefined","onClick","e","setView","target","latlng","getZoom","onAdd","LayerGroup","features","getLayers","mapPixelBounds","markerWidth","markerHeight","i","length","x","y","ref","newOptions","marker","currentMarkerPosition","latLngToContainerPoint","min","max","center","getCenter","rad","Math","atan2","rad2TopLeftcorner","markerDistance","abs","PI","tan","fillOpacity","angle","rotatedMarker","containerPointToLatLng","hasLayer","RotatedMarker","Marker","statics","TRANSFORM_ORIGIN","DomUtil","testProp","_initIcon","prototype","call","_icon","style","_setPos","pos","costheta","TRANSFORM","Browser","ie","cos","sintheta","sin","filter","setAngle","ang","edgeMarker","TileLayer","Grayscale","quotaRed","quotaGreen","quotaBlue","quotaDividerTune","quotaDivider","url","crossOrigin","_makeGrayscale","tile","_createTile","img","getAttribute","canvas","document","createElement","ctx","width","height","getContext","imgd","drawImage","getImageData","pix","data","n","putImageData","setAttribute","src","toDataURL","tileLayer","grayscale","jQuery","ready","$","croDate","str","strArray","split","concat","oldLayer","panTimeout","maxZoom","rkgScript","response","body","classList","contains","coordinates","zoom","attributionControl","zoomSnap","gestureHandling","gestureHandlingOptions","text","scroll","scrollMac","attribution","layer","excursionsNow","nowIcon","divIcon","className","newIcon","oldIcon","newIconActive","nowIconActive","nowLayer","searchLayer","searchEdgeMarkers","_loop","longitude","latitude","id","now","markers","bindPopup","post_title","starttime","endtime","setIcon","excursionsNew","_loop2","display_name","limitation","newLayer","excursionsOld","_loop3","oldIconActive","eOffset","offset","oldEdgeMarkers","popup","_source","console","addClass","old","hide","show","removeClass","topPos","position","top","scrollTop","getMarker","currentTarget","setTimeout","panTo","loginStatus","clearTimeout","css","animate","opacity","submit","preventDefault","form","formData","FormData","append","remove","ajax","ajaxUrl","type","dataType","log","html","cords","_loop4","val","mapAdmin","geocoder","lat","lng","setMinZoom","setZoom","long","zoomControl","mapExcursion","activeEditor","template","name","terms","price","hasClass","description","get","setContent","replace","RegExp","children","removeAttr","category","attr","toggle","infinite","slidesToShow","slidesToScroll","prevArrow","nextArrow","responsive","breakpoint","settings","not","has","link","signclass","signtext","title","content","signdate","window","location","prop","fileData","userData","contentType","processData","success","fadeOut","promise","done","fadeIn","error","toggleClass","panToPoint","control","after","detach","appendTo","next","action","inventoryHasValidationErrors","reservationEl","comment","reservationId","parent","forEach","itemEl","find","item","is","statusEl","reload","responseText","select2"],"mappings":"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","file":"script.js","sourcesContent":["(function(L) {\n  'use strict';\n  var classToExtend = 'Class';\n  if (L.version.charAt(0) !== '0') {\n    classToExtend = 'Layer';\n  }\n\n  L.EdgeMarker = L[classToExtend].extend({\n    options: {\n      distanceOpacity: false,\n      distanceOpacityFactor: 4,\n      layerGroup: null,\n      rotateIcons: true,\n      findEdge : function (map){\n        return L.bounds([0,0], map.getSize());\n      },\n      icon: L.icon({\n        iconUrl: L.Icon.Default.imagePath + '/edge-arrow-marker.png',\n        clickable: true,\n        iconSize: [48, 48],\n        iconAnchor: [24, 24]\n      })\n    },\n\n    initialize: function(options) {\n      L.setOptions(this, options);\n    },\n\n    addTo: function(map) {\n      this._map = map;\n\n      // add a method to get applicable features\n      if (typeof map._getFeatures !== 'function') {\n        L.extend(map, {\n          _getFeatures: function() {\n            var out = [];\n            for (var l in this._layers) {\n              if (typeof this._layers[l].getLatLng !== 'undefined') {\n                out.push(this._layers[l]);\n              }\n            }\n            return out;\n          }\n        });\n      }\n\n      map.on('move', this._addEdgeMarkers, this);\n      map.on('viewreset', this._addEdgeMarkers, this);\n\n      this._addEdgeMarkers();\n\n      map.addLayer(this);\n\n      return this;\n    },\n\n    destroy: function() {\n      if (this._map && this._borderMarkerLayer) {\n        this._map.off('move', this._addEdgeMarkers, this);\n        this._map.off('viewreset', this._addEdgeMarkers, this);\n\n        this._borderMarkerLayer.clearLayers();\n        this._map.removeLayer(this._borderMarkerLayer);\n\n        delete this._map._getFeatures;\n\n        this._borderMarkerLayer = undefined;\n      }\n    },\n\n    onClick: function(e) {\n      this._map.setView(e.target.options.latlng, this._map.getZoom());\n    },\n\n    onAdd: function() {},\n\n    _borderMarkerLayer: undefined,\n\n    _addEdgeMarkers: function() {\n      if (typeof this._borderMarkerLayer === 'undefined') {\n        this._borderMarkerLayer = new L.LayerGroup();\n      }\n      this._borderMarkerLayer.clearLayers();\n\n      var features = [];\n      if (this.options.layerGroup != null) {\n        features = this.options.layerGroup.getLayers();\n      } else {\n        features = this._map._getFeatures();\n      }\n\n      var mapPixelBounds = this.options.findEdge(this._map);\n\n      var markerWidth = this.options.icon.options.iconSize[0];\n      var markerHeight = this.options.icon.options.iconSize[1];\n\n      for (var i = 0; i < features.length; i++) {\n        var currentMarkerPosition = this._map.latLngToContainerPoint(\n          features[i].getLatLng()\n        );\n\n        if (currentMarkerPosition.y < mapPixelBounds.min.y ||\n          currentMarkerPosition.y > mapPixelBounds.max.y ||\n          currentMarkerPosition.x > mapPixelBounds.max.x ||\n          currentMarkerPosition.x < mapPixelBounds.min.x\n        ) {\n          // get pos of marker\n          var x = currentMarkerPosition.x;\n          var y = currentMarkerPosition.y;\n          var markerDistance;\n\n          // we want to place EdgeMarker on the line from center screen to target,\n          // and against the border of the screen\n          // we know angel and its x or y cordiante\n          // (depending if we want to place it against top/bottom edge or left right edge)\n          // fromthat we can calculate the other cordinate\n          var center = mapPixelBounds.getCenter();\n\n          var rad = Math.atan2(center.y - y, center.x - x);\n          var rad2TopLeftcorner = Math.atan2(center.y-mapPixelBounds.min.y,center.x-mapPixelBounds.min.x);\n\n          // target is in between diagonals window/ hourglass\n          // more out in y then in x\n          if (Math.abs(rad) > rad2TopLeftcorner && Math.abs (rad) < Math.PI -rad2TopLeftcorner) {\n\n            // bottom out\n            if (y < center.y ){\n              y = mapPixelBounds.min.y + markerHeight/2;\n              x = center.x -  (center.y-y) / Math.tan(Math.abs(rad));\n              markerDistance = currentMarkerPosition.y - mapPixelBounds.y;\n            // top out\n            }else{\n              y = mapPixelBounds.max.y - markerHeight/2;\n              x = center.x - (y-center.y)/ Math.tan(Math.abs(rad));\n              markerDistance = -currentMarkerPosition.y;\n            }\n          }else {\n\n            // left out\n            if (x < center.x ){\n              x = mapPixelBounds.min.x + markerWidth/2;\n              y = center.y -  (center.x-x ) *Math.tan(rad);\n              markerDistance = -currentMarkerPosition.x;\n            // right out\n            }else{\n              x = mapPixelBounds.max.x - markerWidth/2;\n              y = center.y +  (x - center.x) *Math.tan(rad);\n              markerDistance = currentMarkerPosition.x - mapPixelBounds.x;\n            }\n          }\n          // correction so that is always has same distance to edge\n\n          // top out (top has y=0)\n          if (y < mapPixelBounds.min.y + markerHeight/2) {\n            y = mapPixelBounds.min.y + markerHeight/2;\n            // bottom out\n          }\n          else if (y > mapPixelBounds.max.y - markerHeight/2) {\n            y = mapPixelBounds.max.y - markerHeight/2 ;\n          }\n          // right out\n          if (x > mapPixelBounds.max.x - markerWidth / 2) {\n            x = mapPixelBounds.max.x - markerWidth / 2;\n            // left out\n          } else if (x < markerWidth / 2) {\n            x = mapPixelBounds.min.x + markerWidth / 2;\n          }\n\n          // change opacity on distance\n          var newOptions = this.options;\n          if (this.options.distanceOpacity) {\n            newOptions.fillOpacity =\n              (100 - markerDistance / this.options.distanceOpacityFactor) / 100;\n          }\n\n          // rotate markers\n          if (this.options.rotateIcons) {\n            var angle = rad / Math.PI * 180;\n            newOptions.angle = angle;\n          }\n\n          var ref = { latlng: features[i].getLatLng() };\n          newOptions = L.extend({}, newOptions, ref);\n\n          var marker = L.rotatedMarker(\n            this._map.containerPointToLatLng([x, y]),\n            newOptions\n          ).addTo(this._borderMarkerLayer);\n\n          marker.on('click', this.onClick, marker);\n        }\n      }\n      if (!this._map.hasLayer(this._borderMarkerLayer)) {\n        this._borderMarkerLayer.addTo(this._map);\n      }\n    }\n  });\n\n  /*\n   * L.rotatedMarker class is taken from https://github.com/bbecquet/Leaflet.PolylineDecorator.\n   */\n  L.RotatedMarker = L.Marker.extend({\n    options: {\n      angle: 0\n    },\n\n    statics: {\n      TRANSFORM_ORIGIN: L.DomUtil.testProp([\n        'transformOrigin',\n        'WebkitTransformOrigin',\n        'OTransformOrigin',\n        'MozTransformOrigin',\n        'msTransformOrigin'\n      ])\n    },\n\n    _initIcon: function() {\n      L.Marker.prototype._initIcon.call(this);\n\n      this._icon.style[L.RotatedMarker.TRANSFORM_ORIGIN] = '50% 50%';\n    },\n\n    _setPos: function(pos) {\n      L.Marker.prototype._setPos.call(this, pos);\n\n      if (L.DomUtil.TRANSFORM) {\n        // use the CSS transform rule if available\n        this._icon.style[L.DomUtil.TRANSFORM] +=\n          ' rotate(' + this.options.angle + 'deg)';\n      } else if (L.Browser.ie) {\n        // fallback for IE6, IE7, IE8\n        var rad = this.options.angle * (Math.PI / 180),\n          costheta = Math.cos(rad),\n          sintheta = Math.sin(rad);\n        this._icon.style.filter +=\n          \" progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11=\" +\n          costheta +\n          ', M12=' +\n          -sintheta +\n          ', M21=' +\n          sintheta +\n          ', M22=' +\n          costheta +\n          ')';\n      }\n    },\n\n    setAngle: function(ang) {\n      this.options.angle = ang;\n    }\n  });\n\n  L.rotatedMarker = function(pos, options) {\n    return new L.RotatedMarker(pos, options);\n  };\n\n  L.edgeMarker = function(options) {\n    return new L.EdgeMarker(options);\n  };\n})(L);\n","/*\n * L.TileLayer.Grayscale is a regular tilelayer with grayscale makeover.\n */\n\nL.TileLayer.Grayscale = L.TileLayer.extend({\n\toptions: {\n\t\tquotaRed: 21,\n\t\tquotaGreen: 71,\n\t\tquotaBlue: 8,\n\t\tquotaDividerTune: 0,\n\t\tquotaDivider: function() {\n\t\t\treturn this.quotaRed + this.quotaGreen + this.quotaBlue + this.quotaDividerTune;\n\t\t}\n\t},\n\n\tinitialize: function (url, options) {\n\t\toptions = options || {}\n\t\toptions.crossOrigin = true;\n\t\tL.TileLayer.prototype.initialize.call(this, url, options);\n\n\t\tthis.on('tileload', function(e) {\n\t\t\tthis._makeGrayscale(e.tile);\n\t\t});\n\t},\n\n\t_createTile: function () {\n\t\tvar tile = L.TileLayer.prototype._createTile.call(this);\n\t\ttile.crossOrigin = \"Anonymous\";\n\t\treturn tile;\n\t},\n\n\t_makeGrayscale: function (img) {\n\t\tif (img.getAttribute('data-grayscaled'))\n\t\t\treturn;\n\n                img.crossOrigin = '';\n\t\tvar canvas = document.createElement(\"canvas\");\n\t\tcanvas.width = img.width;\n\t\tcanvas.height = img.height;\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tctx.drawImage(img, 0, 0);\n\n\t\tvar imgd = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\t\tvar pix = imgd.data;\n\t\tfor (var i = 0, n = pix.length; i < n; i += 4) {\n                        pix[i] = pix[i + 1] = pix[i + 2] = (this.options.quotaRed * pix[i] + this.options.quotaGreen * pix[i + 1] + this.options.quotaBlue * pix[i + 2]) / this.options.quotaDivider();\n\t\t}\n\t\tctx.putImageData(imgd, 0, 0);\n\t\timg.setAttribute('data-grayscaled', true);\n\t\timg.src = canvas.toDataURL();\n\t}\n});\n\nL.tileLayer.grayscale = function (url, options) {\n\treturn new L.TileLayer.Grayscale(url, options);\n};\n","/* global rkgScript */\njQuery(document).ready(($) => {\n    const loginStatus = {action: 'is_user_logged_in'};\n    const croDate = (str) => {\n        const strArray = str.split('-');\n        return `${strArray[2]}.${strArray[1]}.${strArray[0]}.`;\n    };\n    const layer = L.tileLayer.grayscale(\n        'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png',\n        {\n            maxZoom: 18,\n            attribution:\n            '<a href=\"https://wikimediafoundation.org/wiki/Maps_Terms_of_Use\">Wikimedia</a>  &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n        },\n    );\n\n    // const layer = L.tileLayer(\n    //    'http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',\n    //    {\n    //        maxZoom: 18,\n    //        attribution:\n    //        '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n    //    },\n    // );\n\n    let coordinates = null;\n    let zoom = 7.5;\n    if (typeof rkgScript !== 'undefined') {\n        const response = document.body.classList.contains('logged-in');\n        if (response === true) {\n            coordinates = [44.30, 16.5];\n        } else {\n            coordinates = [44.30, 15];\n        }\n        if ($(window).width() <= 1080) {\n            coordinates = [44.40, 16.3];\n            zoom = 6.5;\n        }\n\n        if ($('#rkg-map').length) {\n            const map = L.map('rkg-map', {\n                attributionControl: false,\n                // zoomControl: false,\n                zoomSnap: 0.25,\n                gestureHandling: true,\n                gestureHandlingOptions: {\n                    text: {\n                        touch: 'Koristi dva prsta za mapu',\n                        scroll: 'ctrl + scroll',\n                        scrollMac: '\\u2318 + scroll',\n                    },\n                },\n            }).setView(coordinates, zoom);\n            L.control.attribution({position: 'bottomleft'}).addTo(map);\n            map.addLayer(layer);\n\n            const excursionsNew = $('#excursions').data('new');\n            const excursionsNow = $('#excursions').data('now');\n            const excursionsOld = $('#excursions').data('old');\n            const nowIcon = L.divIcon({\n                className: 'now-div-icon',\n                iconSize: [14, 14],\n            });\n            const newIcon = L.divIcon({\n                className: 'new-div-icon',\n                iconSize: [14, 14],\n            });\n            const oldIcon = L.divIcon({\n                className: 'old-div-icon',\n                iconSize: [14, 14],\n            });\n            const newIconActive = L.divIcon({\n                className: 'new-div-icon-active',\n                iconSize: [20, 20],\n            });\n            const nowIconActive = L.divIcon({\n                className: 'now-div-icon-active',\n                iconSize: [20, 20],\n            });\n            const oldIconActive = L.divIcon({\n                className: 'old-div-icon-active',\n                iconSize: [20, 20],\n            });\n            const nowLayer = L.layerGroup();\n            const newLayer = L.layerGroup();\n            const oldLayer = L.layerGroup();\n            const markers = {};\n            let bounds;\n            let searchLayer =  L.layerGroup();\n            let searchEdgeMarkers = L.edgeMarker({\n                icon: oldIcon,\n                rotateIcons: true,\n                layerGroup: searchLayer,\n                findEdge() {\n                    return L.bounds([0, 0], bounds);\n                },\n            });\n\n            for (let i = 0; i < excursionsNow.length; i++) {\n                if ((excursionsNow[i].longitude !== '')\n                    && (excursionsNow[i].longitude !== '0')\n                ) {\n                    markers[excursionsNow[i].id] = L.marker(\n                        [excursionsNow[i].latitude, excursionsNow[i].longitude],\n                        {\n                            icon: nowIcon,\n                            id: excursionsNow[i].id,\n                            old: false,\n                            now: true,\n                        },\n                    );\n                    markers[excursionsNow[i].id].bindPopup(\n                        `<b class=\"leaflet-popup-bold-now\">${excursionsNow[i].post_title}</b><br>\n                ${croDate(excursionsNow[i].starttime)} - ${croDate(excursionsNow[i].endtime)}<br>\n                Organizator: ${excursionsNow[i].display_name}<br>\n                Planirano osoba: ${excursionsNow[i].limitation}`,\n                    ).on('mouseover', () => {\n                        markers[excursionsNow[i].id].setIcon(nowIconActive);\n                    }).on('mouseout', () => {\n                        markers[excursionsNow[i].id].setIcon(nowIcon);\n                    });\n                    nowLayer.addLayer(markers[excursionsNow[i].id]);\n                }\n            }\n            nowLayer.addTo(map);\n            for (let i = 0; i < excursionsNew.length; i++) {\n                if ((excursionsNew[i].longitude !== '')\n                    && (excursionsNew[i].longitude !== '0')\n                ) {\n                    markers[excursionsNew[i].id] = L.marker(\n                        [excursionsNew[i].latitude, excursionsNew[i].longitude],\n                        {\n                            icon: newIcon,\n                            id: excursionsNew[i].id,\n                            old: false,\n                            now: false,\n                        },\n                    );\n                    markers[excursionsNew[i].id].bindPopup(\n                        `<b class=\"leaflet-popup-bold-new\">${excursionsNew[i].post_title}</b><br>\n                ${croDate(excursionsNew[i].starttime)} - ${croDate(excursionsNew[i].endtime)}<br>\n                Organizator: ${excursionsNew[i].display_name}<br>\n                Planirano osoba: ${excursionsNew[i].limitation}`,\n                    ).on('mouseover', () => {\n                        markers[excursionsNew[i].id].setIcon(newIconActive);\n                    }).on('mouseout', () => {\n                        markers[excursionsNew[i].id].setIcon(newIcon);\n                    });\n                    newLayer.addLayer(markers[excursionsNew[i].id]);\n                }\n            }\n            newLayer.addTo(map);\n            for (let i = 0; i < excursionsOld.length; i++) {\n                if ((excursionsOld[i].longitude !== '')\n                    && (excursionsOld[i].longitude !== '0')\n                ) {\n                    markers[excursionsOld[i].id] = L.marker(\n                        [excursionsOld[i].latitude, excursionsOld[i].longitude],\n                        {\n                            icon: oldIcon,\n                            id: excursionsOld[i].id,\n                            old: true,\n                            now: false,\n                        },\n                    );\n                    markers[excursionsOld[i].id].bindPopup(\n                        `<b class=\"leaflet-popup-bold-old\">${excursionsOld[i].post_title}</b><br>\n                ${croDate(excursionsOld[i].starttime)} - ${croDate(excursionsOld[i].endtime)}<br>\n                Organizator: ${excursionsOld[i].display_name}<br>\n                Planirano osoba: ${excursionsOld[i].limitation}`,\n                    ).on('mouseover', () => {\n                        markers[excursionsOld[i].id].setIcon(oldIconActive);\n                    }).on('mouseout', () => {\n                        markers[excursionsOld[i].id].setIcon(oldIcon);\n                    });\n                    oldLayer.addLayer(markers[excursionsOld[i].id]);\n                }\n            }\n            oldLayer.addTo(map);\n            const eOffset = $('#excursions').offset();\n\n            bounds = map.getSize();\n            if ($(window).width() > 1080) {\n                if (response === true) {\n                    bounds = [eOffset.left, map.getSize().y];\n                }\n            }\n            L.edgeMarker({\n                icon: nowIcon,\n                rotateIcons: true,\n                layerGroup: nowLayer,\n                findEdge() {\n                    return L.bounds([0, 0], bounds);\n                },\n            }).addTo(map);\n            L.edgeMarker({\n                icon: newIcon,\n                rotateIcons: true,\n                layerGroup: newLayer,\n                findEdge() {\n                    return L.bounds([0, 0], bounds);\n                },\n            }).addTo(map);\n\n            const oldEdgeMarkers = L.edgeMarker({\n                icon: oldIcon,\n                rotateIcons: true,\n                layerGroup: oldLayer,\n                findEdge() {\n                    return L.bounds([0, 0], bounds);\n                },\n            });\n            oldEdgeMarkers.addTo(map);\n\n            map.on('popupopen', (e) => {\n                const marker = e.popup._source.options;\n                const target = $(`#excursion-${marker.id}`);\n                console.log(target);\n                target.addClass('active');\n                if (marker.old) {\n                    $('.excursion-new-container').hide();\n                    $('.excursion-old-container').show();\n                    $('.button-excursion-old').addClass('active');\n                    $('.button-excursion-new').removeClass('active');\n                    $('.excursion-gradient').addClass('old');\n                    $('#excursions').addClass('excursions-old');\n                    const topPos = target.position().top;\n                    $('.excursion-old-container').scrollTop(topPos);\n                } else {\n                    $('.excursion-old-container').hide();\n                    $('.excursion-new-container').show();\n                    $('.button-excursion-new').addClass('active');\n                    $('.button-excursion-old').removeClass('active');\n                    $('.excursion-gradient').removeClass('old');\n                    $('#excursions').removeClass('excursions-old');\n                    const topPos = target.position().top;\n                    $('.excursion-new-container').scrollTop(topPos);\n                }\n            });\n            map.on('popupclose', () => {\n                $('.excursion').removeClass('active');\n            });\n            let panTimeout;\n            $('.excursion').hover(\n                (e) => {\n                    const getMarker = $(e.currentTarget).data('marker');\n                    const marker = markers[getMarker.id];\n                    if (marker.options.old) {\n                        marker.setIcon(oldIconActive);\n                    } else if (marker.options.now) {\n                        marker.setIcon(nowIconActive);\n                    } else {\n                        marker.setIcon(newIconActive);\n                    }\n                    panTimeout = setTimeout(() => {\n                        map.panTo(marker.getLatLng());\n                    }, 1000);\n                },\n                (e) => {\n                    const getMarker = $(e.currentTarget).data('marker');\n                    const marker = markers[getMarker.id];\n                    if (marker.options.old) {\n                        marker.setIcon(oldIcon);\n                    } else if (marker.options.now) {\n                        marker.setIcon(nowIcon);\n                    } else {\n                        marker.setIcon(newIcon);\n                    }\n                    clearTimeout(panTimeout);\n                },\n            );\n\n            $('.excursion-block-btn').on('click', (e) => {\n                $(e.currentTarget).hide();\n                $('.excursion-block-search-btn').css('display', 'block');\n                $('.excursion-block-search').animate({\n                    height: 'toggle',\n                    opacity: 'toggle',\n                }, 'fast');\n            });\n\n            $('#excursion-block-search-form').submit((e) => {\n                e.preventDefault();\n                const form = (e.currentTarget);\n                const formData = new FormData(form);\n                formData.append('action', 'excursion_search');\n                oldLayer.remove();\n                oldEdgeMarkers.destroy();\n                searchLayer.remove();\n                searchEdgeMarkers.destroy();\n\n                jQuery.ajax({\n                    url: rkgScript.ajaxUrl,\n                    type: 'POST',\n                    contentType: false,\n                    processData: false,\n                    dataType: 'json',\n                    data: formData,\n                    success(response) {\n                        console.log(response);\n                        $('.excursion-old-container-list-serarch').html(response.html);\n                        $('.excursion-old-container-list-serarch').show();\n                        $('.excursion-old-container-list').hide();\n                        searchLayer = L.layerGroup();\n                        for (let i = 0; i < response.cords.length; i++) {\n                            markers[response.cords[i].id] = L.marker(\n                                [response.cords[i].latitude, response.cords[i].longitude],\n                                {\n                                    icon: oldIcon,\n                                    id: response.cords[i].id,\n                                    old: true,\n                                    now: false,\n                                },\n                            );\n                            markers[response.cords[i].id].bindPopup(\n                                `<b class=\"leaflet-popup-bold-old\">${response.cords[i].post_title}</b><br>\n                ${croDate(response.cords[i].starttime)} - ${croDate(response.cords[i].endtime)}<br>\n                Organizator: ${response.cords[i].display_name}<br>\n                Planirano osoba: ${response.cords[i].limitation}`,\n                            ).on('mouseover', () => {\n                                markers[response.cords[i].id].setIcon(oldIconActive);\n                            }).on('mouseout', () => {\n                                markers[response.cords[i].id].setIcon(oldIcon);\n                            });\n                            searchLayer.addLayer(markers[response.cords[i].id]);\n                        }\n                        searchLayer.addTo(map);\n                        searchEdgeMarkers = L.edgeMarker({\n                            icon: oldIcon,\n                            rotateIcons: true,\n                            layerGroup: searchLayer,\n                            findEdge() {\n                                return L.bounds([0, 0], bounds);\n                            },\n                        });\n                        searchEdgeMarkers.addTo(map);\n                    },\n                });\n            });\n\n            $('.button-excursion-new').on('click', () => {\n                oldLayer.addTo(map);\n                oldEdgeMarkers.addTo(map);\n                searchLayer.remove();\n                searchEdgeMarkers.destroy();\n                $('.excursion-block-btn').css('display', 'block');\n                $('.excursion-block-search-btn').css('display', 'none');\n                $('.excursion-block-search').hide();\n                $('.excursion-old-container-list-serarch').hide();\n                $('.excursion-old-container-list').show();\n                $('.excursion-old-container').hide();\n                $('.excursion-new-container').show();\n                $('.button-excursion-new').addClass('active');\n                $('.button-excursion-old').removeClass('active');\n                $('.excursion-gradient').removeClass('old');\n                $('#excursions').removeClass('excursions-old');\n            });\n\n            $('.button-excursion-old').on('click', () => {\n                oldLayer.addTo(map);\n                oldEdgeMarkers.addTo(map);\n                searchLayer.remove();\n                searchEdgeMarkers.destroy();\n                $('.excursion-block-btn').css('display', 'block');\n                $('.excursion-block-search-btn').css('display', 'none');\n                $('.excursion-block-search').hide();\n                $('.excursion-old-container-list-serarch').hide();\n                $('.excursion-old-container-list').show();\n                $('.excursion-new-container').hide();\n                $('.excursion-old-container').show();\n                $('.button-excursion-old').addClass('active');\n                $('.button-excursion-new').removeClass('active');\n                $('.excursion-gradient').addClass('old');\n                $('#excursions').addClass('excursions-old');\n            });\n\n            $('.buton-excursion-mobile').on('click', (e) => {\n                oldLayer.addTo(map);\n                oldEdgeMarkers.addTo(map);\n                searchLayer.remove();\n                searchEdgeMarkers.destroy();\n                $('.excursion-block-btn').css('display', 'block');\n                $('.excursion-block-search-btn').css('display', 'none');\n                $('.excursion-block-search').hide();\n                $('.excursion-old-container-list-serarch').hide();\n                if ($(e.currentTarget).hasClass('old')) {\n                    $(e.currentTarget).removeClass('old');\n                    $(e.currentTarget).addClass('new');\n                    $('.excursion-old-container-list').show();\n                    $('.excursion-new-container').hide();\n                    $('.excursion-old-container').show();\n                    $('.button-excursion-old').addClass('active');\n                    $('.button-excursion-new').removeClass('active');\n                    $('.excursion-gradient').addClass('old');\n                    $('#excursions').addClass('excursions-old');\n                } else {\n                    $(e.currentTarget).removeClass('new');\n                    $(e.currentTarget).addClass('old');\n                    $('.excursion-old-container-list').show();\n                    $('.excursion-old-container').hide();\n                    $('.excursion-new-container').show();\n                    $('.button-excursion-new').addClass('active');\n                    $('.button-excursion-old').removeClass('active');\n                    $('.excursion-gradient').removeClass('old');\n                    $('#excursions').removeClass('excursions-old');\n                }\n            });\n        }\n    }\n\n    if ($('#rkg-admin-map').length) {\n        const newIcon = L.divIcon(\n            {className: 'leaflet-div-icon', iconSize: [14, 14]},\n        );\n        let mapAdmin;\n        let marker;\n\n        if ($('input[name=latitude]').val()) {\n            mapAdmin = L.map('rkg-admin-map').setView(\n                [$('input[name=latitude]').val(), $('input[name=longitude]').val()],\n                15,\n            );\n            mapAdmin.addLayer(layer);\n            marker = L.marker(\n                [$('input[name=latitude]').val(), $('input[name=longitude]').val()],\n                {icon: newIcon},\n            ).addTo(mapAdmin);\n            mapAdmin.addLayer(marker);\n        } else {\n            mapAdmin = L.map('rkg-admin-map').setView([44.7, 15], 6);\n            mapAdmin.addLayer(layer);\n        }\n\n        const geocoderControlOptions = {\n            bounds: false, // To not send viewbox\n            markers: false, // To not add markers when we geocoder\n            panToPoint: false, // Since no maps, no need to pan the map to the geocoded-selected location\n        };\n\n        L.control.geocoder('bd35a36b680bdf', geocoderControlOptions).addTo(mapAdmin)\n            .on('select', (e) => {\n                if (marker) {\n                    mapAdmin.removeLayer(marker);\n                }\n                mapAdmin.setView(e.latlng, 15);\n                marker = new L.Marker(e.latlng, {icon: newIcon});\n                mapAdmin.addLayer(marker);\n                $('input[name=latitude]').val(e.latlng.lat);\n                $('input[name=longitude]').val(e.latlng.lng);\n            });\n\n        mapAdmin.on('click', (e) => {\n            if (marker) {\n                mapAdmin.removeLayer(marker);\n            }\n            marker = new L.Marker(e.latlng, {icon: newIcon});\n            mapAdmin.addLayer(marker);\n            $('input[name=latitude]').val(e.latlng.lat);\n            $('input[name=longitude]').val(e.latlng.lng);\n        });\n\n        mapAdmin.setMinZoom(3);\n        mapAdmin.setZoom(8);\n    }\n\n    if ($('#rkg-excursion-map').length) {\n        const lat = $('#rkg-excursion-map').data('lat');\n        const long = $('#rkg-excursion-map').data('long');\n        const newIcon = L.divIcon(\n            {className: 'new-div-icon', iconSize: [14, 14]},\n        );\n\n        const mapExcursion = L.map('rkg-excursion-map', {\n            attributionControl: false,\n            zoomControl: false,\n            zoomSnap: 0.5,\n            gestureHandling: true,\n            gestureHandlingOptions: {\n                text: {\n                    touch: 'Koristi dva prsta za mapu',\n                    scroll: 'ctrl + scroll',\n                    // scrollMac: \"\\u2318 + scroll\"\n                },\n            },\n        }).setView(\n            [lat, long],\n            15,\n        );\n        const marker = L.marker(\n            [lat, long],\n            {icon: newIcon},\n        ).addTo(mapExcursion);\n        mapExcursion.addLayer(layer);\n        mapExcursion.addLayer(marker);\n    }\n\n    $('#rkg_category').on('change', () => {\n        $('#title-prompt-text').hide();\n        const template = $('#rkg_category option:selected').data('template');\n        const category = $('#rkg_category option:selected').val();\n        $('#title').val(template.name);\n        $('#rkg-location').val(template.location);\n        $('#rkg-terms').val(template.terms);\n        $('#rkg-price').val(template.price);\n        $('#rkg-limitation').val(template.limitation);\n        if ($('#wp-content-wrap').hasClass('html-active')) {\n            $('#content').val(template.description);\n        } else {\n            const activeEditor = tinyMCE.get('content');\n            if (activeEditor !== null) {\n                activeEditor.setContent(template.description\n                    .replace(/\\n\\s*\\n/g, '\\n').replace(\n                        // eslint-disable-next-line no-control-regex\n                        new RegExp('\\r?\\n', 'g'), '<br />',\n                    ));\n            }\n        }\n\n        $('#rkg_organiser').children().removeAttr('selected');\n        $('.instructor-option').hide();\n        $(`#instructor-${category}`).show();\n        $('#instructor-none').attr('selected', 'selected');\n    });\n\n    $('.course-terms-control').on('click', () => {\n        $('.course-terms').toggle();\n        $('.course-terms-up').toggle();\n        $('.course-terms-down').toggle();\n    });\n\n    $('.rkg-course-slick').slick({\n        infinite: true,\n        slidesToShow: 3,\n        slidesToScroll: 3,\n        prevArrow: $('.rkg-course-chevron-left'),\n        nextArrow: $('.rkg-course-chevron-right'),\n        responsive: [\n            {\n                breakpoint: 1081,\n                settings: {\n                    // centerMode: true,\n                    slidesToShow: 1,\n                    slidesToScroll: 1,\n                    // centerPadding: '25%',\n                },\n            },\n        ],\n    });\n\n    $('#rkg-starttime').on('change', (e) => {\n        const min = $(e.currentTarget).val();\n        $('#rkg-endtime').attr('min', min);\n    });\n\n    $('.course-block-select').on('click', (e) => {\n        e.preventDefault();\n        const target = $(e.currentTarget).data('target');\n        $('.course-block-terms').not(`#course-block-terms-${target}`).hide();\n        $(`#course-block-terms-${target}`).animate({\n            height: 'toggle',\n            opacity: 'toggle',\n        }, 'fast');\n    });\n\n    $(document).on('mouseup', (e) => {\n        if (!$('.course-block-select').is(e.target)\n            && $('.course-block-terms').has(e.target).length === 0) {\n            $('.course-block-terms').hide();\n        }\n    });\n\n    $('.course-block-term').on('click', (e) => {\n        e.preventDefault();\n        const target = $(e.currentTarget).data('target');\n        const id = $(e.currentTarget).data('id');\n        const link = $(e.currentTarget).data('link');\n        const date = $(e.currentTarget).data('date');\n        const title = $(e.currentTarget).data('title');\n        const content = $(e.currentTarget).data('content');\n        const signdate = $(e.currentTarget).data('signdate');\n        const signclass = $(e.currentTarget).data('signclass');\n        const signtext = $(e.currentTarget).data('signtext');\n        $(`#course-block-link-${target}`).attr('href', link);\n        $(`#course-block-link-more-${target}`).attr('href', link);\n        $(`#course-block-date-${target}`).text(date);\n        $(`#course-block-title-${target}`).text(title);\n        $(`#course-block-content-${target}`).text(content);\n        $(`#course-block-signup-${target}`).removeClass();\n        $(`#course-block-signup-${target}`).addClass(signclass);\n        $(`#course-block-signup-${target}`).text(signtext);\n        $(`#course-block-signup-${target}`).attr('data-course', id);\n        $(`#course-block-signup-${target}`).attr('data-name', title);\n        $(`#course-block-signup-${target}`).attr('data-date', signdate);\n        $(`#course-block-terms-${target}`).animate({\n            height: 'toggle',\n            opacity: 'toggle',\n        }, 'fast');\n        window.location = link;\n    });\n\n    $('body').on('change', '#file', (e) => {\n        const fileData = $(e.currentTarget).prop('files')[0];\n        const userData = $('#userId').val();\n        const formData = new FormData();\n        formData.append('file', fileData);\n        formData.append('user', userData);\n        formData.append('action', 'file_upload');\n\n        jQuery.ajax({\n            url: rkgScript.ajaxUrl,\n            type: 'POST',\n            contentType: false,\n            processData: false,\n            data: formData,\n            success(response) {\n                $('#brevetShow').attr('src', response);\n            },\n        });\n    });\n\n    $('body').on('click', '.rkg-news-category', (e) => {\n        const category = $(e.currentTarget).attr('data-id');\n        const formData = new FormData();\n        formData.append('id', category);\n        formData.append('action', 'news_block_update');\n\n        jQuery.ajax({\n            url: rkgScript.ajaxUrl,\n            type: 'POST',\n            contentType: false,\n            processData: false,\n            data: formData,\n            dataType: 'json',\n            success(response) {\n                $('.rkg-category-container').html(response.category);\n                $('.news-content-container').fadeOut('fast').promise().done(() => {\n                    $('.news-content-container').html(response.content).fadeIn('fast');\n                });\n            },\n            error(error) {\n                console.log(error);\n            },\n        });\n    });\n\n    $('.rkg-category-container').on('click', '.rkg-news-category-select', (e) => {\n        e.preventDefault();\n        const target = $(e.currentTarget).data('target');\n        $('.rkg-news-category-select-arrow').toggleClass('up');\n        $('.rkg-news-category, .rkg-news-category-link').animate({\n            height: 'toggle',\n            opacity: 'toggle',\n        }, 'fast');\n    });\n\n    $('#misc-publishing-actions').after($('#cancle_excursion'));\n\n    $('#titlediv').before($('#rkg_category_table'));\n\n    $('#rkg_excursion_data_metabox, #rkg_course_data_metabox').detach().appendTo('#prenormal-sortables');\n\n    //// ***** Reservation / Inventory\n\n    $('.new-inventory-icon').on('click', (e) => {\n        $(e.currentTarget).hide();\n        $(e.currentTarget).next().show();\n    });\n\n    // Reservation and inventory validation\n    let inventoryHasValidationErrors = false;\n\n    $('.reservations-blocklet input[type=text]').on('focus', (e) => {\n        $(e.currentTarget).removeClass('hasErrors');\n        $(e.currentTarget).removeClass('noErrors');\n    }).on('blur', (e) => {\n        const id = $(e.currentTarget).val();\n        if (id.trim().length === 0) {\n            // User probably misclicked, string is empty\n            return;\n        }\n\n        const type = $(e.currentTarget).attr('name');\n        if (type === \"lead\") {\n            return;\n        }\n\n        $.ajax({\n            type: 'POST',\n            dataType: 'json',\n            url: rkgScript.ajaxUrl,\n            data: {\n                action: 'check_inventory',\n                id,\n                type,\n            },\n            success: (data) => {\n                if (data !== \"ok\") {\n                    inventoryHasValidationErrors = true;\n                    $(e.currentTarget).addClass('hasErrors');\n                } else {\n                    $(e.currentTarget).removeClass('hasErrors'); \n                    $(e.currentTarget).addClass('noErrors');\n                    inventoryHasValidationErrors = false;\n                }\n            },\n            error(error) {\n                console.log(error);\n            },\n        });\n    });\n    $('label[for=role]').parent().parent().remove();\n\n    // Saving equipment reservations\n    $('.reservation-save').on('click', (e) => {\n        if (inventoryHasValidationErrors) {\n            return;\n        }\n        e.target.disabled = true;\n\n        const reservationId = e.target.getAttribute(\"data-id\");\n        const data = new FormData();\n        data.append('reservation', reservationId);\n\n        const reservationEl = $(e.target).parent().parent();\n        data.append('user_id', reservationEl.children('.column-user_id').text());\n        const definitions = ['mask', 'regulator', 'suit', 'boots', 'gloves', 'fins', 'bcd', 'lead'];\n        definitions.forEach(item => {\n            const itemEl = reservationEl.find('.column-'+item+' input');\n            if (itemEl.is(\":visible\")) {\n                // Write new input value\n                data.append(item, itemEl.val());\n            } else {\n                // Write return status \n                const statusEl = reservationEl.find('.column-'+item+' select');\n                data.append(item+'_returned', statusEl.val());\n            }\n        });\n\n        const comment = reservationEl.find('.column-comment textarea');;\n        data.append('other', comment.val());\n\n        data.append('action', 'edit_reservation');\n        jQuery.ajax({\n            url: rkgScript.ajaxUrl,\n            type: 'POST',\n            contentType: false,\n            processData: false,\n            dataType: 'json',\n            data,\n            success: () => {\n                location.reload();\n            },\n            error(response) {\n                if (response != \"ok\") {\n                    $('#error-message').removeClass(\"hidden\");\n                    $('#error-text').append(response.responseText);\n                    $('#error-text').removeClass(\"hidden\");\n                    $('input.button').attr('disabled', false);   \n                }\n            }\n        });\n    });\n\n    $('#custom-new-reservation').on('submit', (e) => {\n        e.preventDefault();\n\n        if (!inventoryHasValidationErrors) {\n            $('input.button').attr('disabled', true);\n\n            const form = (e.currentTarget);\n            const formData = new FormData(form);\n            formData.append('action', 'add_custom_reservation');\n\n            jQuery.ajax({\n                url: rkgScript.ajaxUrl,\n                type: 'POST',\n                contentType: false,\n                processData: false,\n                dataType: 'json',\n                data: formData,\n                success() {\n                    window.location.href=\"/wp/wp-admin/admin.php?page=reservations\";\n                },\n                error(response) {\n                    $('#error-message').removeClass(\"hidden\");\n                    $('#error-text').append(response.responseText);\n                    $('#error-text').removeClass(\"hidden\");\n                    $('input.button').attr('disabled', false);\n                }\n            });\n        }\n    });\n\n    if ($('#guest_meta_check').prop('checked') == true) {\n        $('#guest_count_row').show();\n    }\n\n    $('#guest_meta_check').on('change', (e) => {\n        if ($(e.currentTarget).prop('checked') == true) {\n            $('#guest_count_row').show();\n        } else if ($(e.currentTarget).prop('checked') == false) {\n            $('#guest_count_row').hide();\n        }\n    });\n\n    $('.rkg-popover-control').on('click', (e) => {\n        $('.rkg-popover').not($(e.currentTarget).next()).hide();\n        $(e.currentTarget).next().toggle();\n    });\n\n    $('#niid, .preSignupSelect').select2();\n\n    $('.rkg-admin-switch').on('click', (e) => {\n        const id = $(e.currentTarget).attr('id');\n        $(e.currentTarget).toggleClass(\n            'dashicons-arrow-down-alt2 dashicons-arrow-up-alt2',\n        );\n        $(`#${id}-block`).toggle();\n    });\n\n    $('.rkg-show-map').on('click', (e) => {\n        e.preventDefault();\n        $(e.currentTarget).toggleClass('on off');\n        $('#excursions').toggleClass('excursions-map-off');\n    });\n\n    $('.rkg-toggler, .rkg-toggler-title').on('click', (e) => {\n        if ($(e.currentTarget).css('cursor') === 'pointer') {\n            const toggle = $(e.currentTarget).data('toggle');\n            $(e.currentTarget).find('i').toggleClass(\n                'fa-chevron-down fa-chevron-up',\n            );\n            $(`#${toggle}`).toggle();\n        }\n    });\n});\n"]}