{"version":3,"sources":["Leaflet.EdgeMarker.js","TileLayer.Grayscale.js","script.js"],"names":["L","classToExtend","version","charAt","EdgeMarker","extend","options","distanceOpacity","distanceOpacityFactor","layerGroup","rotateIcons","findEdge","map","bounds","getSize","icon","iconUrl","Icon","Default","imagePath","clickable","iconSize","iconAnchor","initialize","setOptions","this","addTo","_map","_getFeatures","l","out","_layers","getLatLng","push","on","_addEdgeMarkers","addLayer","destroy","_borderMarkerLayer","off","clearLayers","removeLayer","undefined","onClick","e","setView","target","latlng","getZoom","onAdd","LayerGroup","features","getLayers","mapPixelBounds","markerWidth","markerHeight","i","length","x","y","ref","newOptions","marker","currentMarkerPosition","latLngToContainerPoint","min","max","center","getCenter","rad","Math","atan2","rad2TopLeftcorner","markerDistance","abs","PI","tan","fillOpacity","angle","rotatedMarker","containerPointToLatLng","hasLayer","RotatedMarker","Marker","statics","TRANSFORM_ORIGIN","DomUtil","testProp","_initIcon","prototype","call","_icon","style","_setPos","pos","costheta","TRANSFORM","Browser","ie","cos","sintheta","sin","filter","setAngle","ang","edgeMarker","TileLayer","Grayscale","quotaRed","quotaGreen","quotaBlue","quotaDividerTune","quotaDivider","url","crossOrigin","_makeGrayscale","tile","_createTile","img","getAttribute","canvas","document","createElement","ctx","width","height","getContext","imgd","drawImage","getImageData","pix","data","n","putImageData","setAttribute","src","toDataURL","tileLayer","grayscale","jQuery","ready","$","croDate","str","strArray","split","concat","newIcon","maxZoom","rkgScript","response","body","classList","contains","coordinates","zoom","attributionControl","zoomSnap","gestureHandling","text","touch","scroll","scrollMac","layer","excursionsNow","excursionsOld","nowIcon","divIcon","className","oldIcon","newIconActive","oldLayer","markers","searchLayer","searchEdgeMarkers","_loop","longitude","latitude","id","now","bindPopup","post_title","endtime","display_name","limitation","setIcon","oldIconActive","_loop2","starttime","nowIconActive","nowLayer","excursionsNew","old","newLayer","panTimeout","eOffset","offset","oldEdgeMarkers","window","left","popup","_source","log","addClass","hide","show","removeClass","topPos","position","top","scrollTop","hover","getMarker","currentTarget","setTimeout","panTo","clearTimeout","css","animate","opacity","submit","preventDefault","form","formData","FormData","append","remove","ajax","ajaxUrl","type","contentType","gestureHandlingOptions","success","console","html","attribution","cords","_loop4","message","val","mapAdmin","control","panToPoint","lat","lng","setMinZoom","setZoom","long","mapExcursion","zoomControl","template","category","name","location","hasClass","description","get","replace","processData","RegExp","dataType","children","removeAttr","toggle","slick","infinite","slidesToShow","slidesToScroll","prevArrow","nextArrow","responsive","breakpoint","attr","not","link","date","title","content","signdate","signclass","signtext","userData","error","fadeOut","promise","done","fadeIn","geocoderControlOptions","toggleClass","detach","appendTo","next","inventoryHasValidationErrors","trim","action","parent","tinyMCE","reservationEl","comment","activeEditor","reservationId","forEach","itemEl","find","item","is","statusEl","reload","responseText","href","prop","fileData","select2"],"mappings":"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","file":"script.js","sourcesContent":["(function(L) {\n  'use strict';\n  var classToExtend = 'Class';\n  if (L.version.charAt(0) !== '0') {\n    classToExtend = 'Layer';\n  }\n\n  L.EdgeMarker = L[classToExtend].extend({\n    options: {\n      distanceOpacity: false,\n      distanceOpacityFactor: 4,\n      layerGroup: null,\n      rotateIcons: true,\n      findEdge : function (map){\n        return L.bounds([0,0], map.getSize());\n      },\n      icon: L.icon({\n        iconUrl: L.Icon.Default.imagePath + '/edge-arrow-marker.png',\n        clickable: true,\n        iconSize: [48, 48],\n        iconAnchor: [24, 24]\n      })\n    },\n\n    initialize: function(options) {\n      L.setOptions(this, options);\n    },\n\n    addTo: function(map) {\n      this._map = map;\n\n      // add a method to get applicable features\n      if (typeof map._getFeatures !== 'function') {\n        L.extend(map, {\n          _getFeatures: function() {\n            var out = [];\n            for (var l in this._layers) {\n              if (typeof this._layers[l].getLatLng !== 'undefined') {\n                out.push(this._layers[l]);\n              }\n            }\n            return out;\n          }\n        });\n      }\n\n      map.on('move', this._addEdgeMarkers, this);\n      map.on('viewreset', this._addEdgeMarkers, this);\n\n      this._addEdgeMarkers();\n\n      map.addLayer(this);\n\n      return this;\n    },\n\n    destroy: function() {\n      if (this._map && this._borderMarkerLayer) {\n        this._map.off('move', this._addEdgeMarkers, this);\n        this._map.off('viewreset', this._addEdgeMarkers, this);\n\n        this._borderMarkerLayer.clearLayers();\n        this._map.removeLayer(this._borderMarkerLayer);\n\n        delete this._map._getFeatures;\n\n        this._borderMarkerLayer = undefined;\n      }\n    },\n\n    onClick: function(e) {\n      this._map.setView(e.target.options.latlng, this._map.getZoom());\n    },\n\n    onAdd: function() {},\n\n    _borderMarkerLayer: undefined,\n\n    _addEdgeMarkers: function() {\n      if (typeof this._borderMarkerLayer === 'undefined') {\n        this._borderMarkerLayer = new L.LayerGroup();\n      }\n      this._borderMarkerLayer.clearLayers();\n\n      var features = [];\n      if (this.options.layerGroup != null) {\n        features = this.options.layerGroup.getLayers();\n      } else {\n        features = this._map._getFeatures();\n      }\n\n      var mapPixelBounds = this.options.findEdge(this._map);\n\n      var markerWidth = this.options.icon.options.iconSize[0];\n      var markerHeight = this.options.icon.options.iconSize[1];\n\n      for (var i = 0; i < features.length; i++) {\n        var currentMarkerPosition = this._map.latLngToContainerPoint(\n          features[i].getLatLng()\n        );\n\n        if (currentMarkerPosition.y < mapPixelBounds.min.y ||\n          currentMarkerPosition.y > mapPixelBounds.max.y ||\n          currentMarkerPosition.x > mapPixelBounds.max.x ||\n          currentMarkerPosition.x < mapPixelBounds.min.x\n        ) {\n          // get pos of marker\n          var x = currentMarkerPosition.x;\n          var y = currentMarkerPosition.y;\n          var markerDistance;\n\n          // we want to place EdgeMarker on the line from center screen to target,\n          // and against the border of the screen\n          // we know angel and its x or y cordiante\n          // (depending if we want to place it against top/bottom edge or left right edge)\n          // fromthat we can calculate the other cordinate\n          var center = mapPixelBounds.getCenter();\n\n          var rad = Math.atan2(center.y - y, center.x - x);\n          var rad2TopLeftcorner = Math.atan2(center.y-mapPixelBounds.min.y,center.x-mapPixelBounds.min.x);\n\n          // target is in between diagonals window/ hourglass\n          // more out in y then in x\n          if (Math.abs(rad) > rad2TopLeftcorner && Math.abs (rad) < Math.PI -rad2TopLeftcorner) {\n\n            // bottom out\n            if (y < center.y ){\n              y = mapPixelBounds.min.y + markerHeight/2;\n              x = center.x -  (center.y-y) / Math.tan(Math.abs(rad));\n              markerDistance = currentMarkerPosition.y - mapPixelBounds.y;\n            // top out\n            }else{\n              y = mapPixelBounds.max.y - markerHeight/2;\n              x = center.x - (y-center.y)/ Math.tan(Math.abs(rad));\n              markerDistance = -currentMarkerPosition.y;\n            }\n          }else {\n\n            // left out\n            if (x < center.x ){\n              x = mapPixelBounds.min.x + markerWidth/2;\n              y = center.y -  (center.x-x ) *Math.tan(rad);\n              markerDistance = -currentMarkerPosition.x;\n            // right out\n            }else{\n              x = mapPixelBounds.max.x - markerWidth/2;\n              y = center.y +  (x - center.x) *Math.tan(rad);\n              markerDistance = currentMarkerPosition.x - mapPixelBounds.x;\n            }\n          }\n          // correction so that is always has same distance to edge\n\n          // top out (top has y=0)\n          if (y < mapPixelBounds.min.y + markerHeight/2) {\n            y = mapPixelBounds.min.y + markerHeight/2;\n            // bottom out\n          }\n          else if (y > mapPixelBounds.max.y - markerHeight/2) {\n            y = mapPixelBounds.max.y - markerHeight/2 ;\n          }\n          // right out\n          if (x > mapPixelBounds.max.x - markerWidth / 2) {\n            x = mapPixelBounds.max.x - markerWidth / 2;\n            // left out\n          } else if (x < markerWidth / 2) {\n            x = mapPixelBounds.min.x + markerWidth / 2;\n          }\n\n          // change opacity on distance\n          var newOptions = this.options;\n          if (this.options.distanceOpacity) {\n            newOptions.fillOpacity =\n              (100 - markerDistance / this.options.distanceOpacityFactor) / 100;\n          }\n\n          // rotate markers\n          if (this.options.rotateIcons) {\n            var angle = rad / Math.PI * 180;\n            newOptions.angle = angle;\n          }\n\n          var ref = { latlng: features[i].getLatLng() };\n          newOptions = L.extend({}, newOptions, ref);\n\n          var marker = L.rotatedMarker(\n            this._map.containerPointToLatLng([x, y]),\n            newOptions\n          ).addTo(this._borderMarkerLayer);\n\n          marker.on('click', this.onClick, marker);\n        }\n      }\n      if (!this._map.hasLayer(this._borderMarkerLayer)) {\n        this._borderMarkerLayer.addTo(this._map);\n      }\n    }\n  });\n\n  /*\n   * L.rotatedMarker class is taken from https://github.com/bbecquet/Leaflet.PolylineDecorator.\n   */\n  L.RotatedMarker = L.Marker.extend({\n    options: {\n      angle: 0\n    },\n\n    statics: {\n      TRANSFORM_ORIGIN: L.DomUtil.testProp([\n        'transformOrigin',\n        'WebkitTransformOrigin',\n        'OTransformOrigin',\n        'MozTransformOrigin',\n        'msTransformOrigin'\n      ])\n    },\n\n    _initIcon: function() {\n      L.Marker.prototype._initIcon.call(this);\n\n      this._icon.style[L.RotatedMarker.TRANSFORM_ORIGIN] = '50% 50%';\n    },\n\n    _setPos: function(pos) {\n      L.Marker.prototype._setPos.call(this, pos);\n\n      if (L.DomUtil.TRANSFORM) {\n        // use the CSS transform rule if available\n        this._icon.style[L.DomUtil.TRANSFORM] +=\n          ' rotate(' + this.options.angle + 'deg)';\n      } else if (L.Browser.ie) {\n        // fallback for IE6, IE7, IE8\n        var rad = this.options.angle * (Math.PI / 180),\n          costheta = Math.cos(rad),\n          sintheta = Math.sin(rad);\n        this._icon.style.filter +=\n          \" progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11=\" +\n          costheta +\n          ', M12=' +\n          -sintheta +\n          ', M21=' +\n          sintheta +\n          ', M22=' +\n          costheta +\n          ')';\n      }\n    },\n\n    setAngle: function(ang) {\n      this.options.angle = ang;\n    }\n  });\n\n  L.rotatedMarker = function(pos, options) {\n    return new L.RotatedMarker(pos, options);\n  };\n\n  L.edgeMarker = function(options) {\n    return new L.EdgeMarker(options);\n  };\n})(L);\n","/*\n * L.TileLayer.Grayscale is a regular tilelayer with grayscale makeover.\n */\n\nL.TileLayer.Grayscale = L.TileLayer.extend({\n\toptions: {\n\t\tquotaRed: 21,\n\t\tquotaGreen: 71,\n\t\tquotaBlue: 8,\n\t\tquotaDividerTune: 0,\n\t\tquotaDivider: function() {\n\t\t\treturn this.quotaRed + this.quotaGreen + this.quotaBlue + this.quotaDividerTune;\n\t\t}\n\t},\n\n\tinitialize: function (url, options) {\n\t\toptions = options || {}\n\t\toptions.crossOrigin = true;\n\t\tL.TileLayer.prototype.initialize.call(this, url, options);\n\n\t\tthis.on('tileload', function(e) {\n\t\t\tthis._makeGrayscale(e.tile);\n\t\t});\n\t},\n\n\t_createTile: function () {\n\t\tvar tile = L.TileLayer.prototype._createTile.call(this);\n\t\ttile.crossOrigin = \"Anonymous\";\n\t\treturn tile;\n\t},\n\n\t_makeGrayscale: function (img) {\n\t\tif (img.getAttribute('data-grayscaled'))\n\t\t\treturn;\n\n                img.crossOrigin = '';\n\t\tvar canvas = document.createElement(\"canvas\");\n\t\tcanvas.width = img.width;\n\t\tcanvas.height = img.height;\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tctx.drawImage(img, 0, 0);\n\n\t\tvar imgd = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\t\tvar pix = imgd.data;\n\t\tfor (var i = 0, n = pix.length; i < n; i += 4) {\n                        pix[i] = pix[i + 1] = pix[i + 2] = (this.options.quotaRed * pix[i] + this.options.quotaGreen * pix[i + 1] + this.options.quotaBlue * pix[i + 2]) / this.options.quotaDivider();\n\t\t}\n\t\tctx.putImageData(imgd, 0, 0);\n\t\timg.setAttribute('data-grayscaled', true);\n\t\timg.src = canvas.toDataURL();\n\t}\n});\n\nL.tileLayer.grayscale = function (url, options) {\n\treturn new L.TileLayer.Grayscale(url, options);\n};\n","/* global rkgScript */\njQuery(document).ready(($) => {\n    const loginStatus = {action: 'is_user_logged_in'};\n    const croDate = (str) => {\n        const strArray = str.split('-');\n        return `${strArray[2]}.${strArray[1]}.${strArray[0]}.`;\n    };\n    const layer = L.tileLayer.grayscale(\n        'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png',\n        {\n            maxZoom: 18,\n            attribution:\n            '<a href=\"https://wikimediafoundation.org/wiki/Maps_Terms_of_Use\">Wikimedia</a>  &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n        },\n    );\n\n    // const layer = L.tileLayer(\n    //    'http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',\n    //    {\n    //        maxZoom: 18,\n    //        attribution:\n    //        '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n    //    },\n    // );\n\n    let coordinates = null;\n    let zoom = 7.5;\n    if (typeof rkgScript !== 'undefined') {\n        const response = document.body.classList.contains('logged-in');\n        if (response === true) {\n            coordinates = [44.30, 16.5];\n        } else {\n            coordinates = [44.30, 15];\n        }\n        if ($(window).width() <= 1080) {\n            coordinates = [44.40, 16.3];\n            zoom = 6.5;\n        }\n\n        try {\n\n            if ($('#rkg-map').length) {\n                const map = L.map('rkg-map', {\n                    attributionControl: false,\n                    // zoomControl: false,\n                    zoomSnap: 0.25,\n                    gestureHandling: true,\n                    gestureHandlingOptions: {\n                        text: {\n                            touch: 'Koristi dva prsta za mapu',\n                            scroll: 'ctrl + scroll',\n                            scrollMac: '\\u2318 + scroll',\n                        },\n                    },\n                }).setView(coordinates, zoom);\n                L.control.attribution({position: 'bottomleft'}).addTo(map);\n                map.addLayer(layer);\n\n                const excursionsNew = $('#excursions').data('new');\n                const excursionsNow = $('#excursions').data('now');\n                const excursionsOld = $('#excursions').data('old');\n                const nowIcon = L.divIcon({\n                    className: 'now-div-icon',\n                    iconSize: [14, 14],\n                });\n                const newIcon = L.divIcon({\n                    className: 'new-div-icon',\n                    iconSize: [14, 14],\n                });\n                const oldIcon = L.divIcon({\n                    className: 'old-div-icon',\n                    iconSize: [14, 14],\n                });\n                const newIconActive = L.divIcon({\n                    className: 'new-div-icon-active',\n                    iconSize: [20, 20],\n                });\n                const nowIconActive = L.divIcon({\n                    className: 'now-div-icon-active',\n                    iconSize: [20, 20],\n                });\n                const oldIconActive = L.divIcon({\n                    className: 'old-div-icon-active',\n                    iconSize: [20, 20],\n                });\n                const nowLayer = L.layerGroup();\n                const newLayer = L.layerGroup();\n                const oldLayer = L.layerGroup();\n                const markers = {};\n                let bounds;\n                let searchLayer =  L.layerGroup();\n                let searchEdgeMarkers = L.edgeMarker({\n                    icon: oldIcon,\n                    rotateIcons: true,\n                    layerGroup: searchLayer,\n                    findEdge() {\n                        return L.bounds([0, 0], bounds);\n                    },\n                });\n\n                for (let i = 0; i < excursionsOld.length; i++) {\n                    if ((excursionsOld[i].longitude !== '')\n                        && (excursionsOld[i].longitude !== '0')\n                    ) {\n                        markers[excursionsOld[i].id] = L.marker(\n                            [excursionsOld[i].latitude, excursionsOld[i].longitude],\n                            {\n                                icon: oldIcon,\n                                id: excursionsOld[i].id,\n                                old: true,\n                                now: false,\n                            },\n                        );\n                        markers[excursionsOld[i].id].bindPopup(\n                            `<b class=\"leaflet-popup-bold-old\">${excursionsOld[i].post_title}</b><br>\n                    ${croDate(excursionsOld[i].starttime)} - ${croDate(excursionsOld[i].endtime)}<br>\n                    Izlet organizira: ${excursionsOld[i].display_name}<br>\n                    Planirano osoba: ${excursionsOld[i].limitation}`,\n                        ).on('mouseover', () => {\n                            markers[excursionsOld[i].id].setIcon(oldIconActive);\n                        }).on('mouseout', () => {\n                            markers[excursionsOld[i].id].setIcon(oldIcon);\n                        });\n                        oldLayer.addLayer(markers[excursionsOld[i].id]);\n                    }\n                }\n                oldLayer.addTo(map);\n\n                for (let i = 0; i < excursionsNow.length; i++) {\n                    if ((excursionsNow[i].longitude !== '')\n                        && (excursionsNow[i].longitude !== '0')\n                    ) {\n                        markers[excursionsNow[i].id] = L.marker(\n                            [excursionsNow[i].latitude, excursionsNow[i].longitude],\n                            {\n                                icon: nowIcon,\n                                id: excursionsNow[i].id,\n                                old: false,\n                                now: true,\n                            },\n                        );\n                        markers[excursionsNow[i].id].bindPopup(\n                            `<b class=\"leaflet-popup-bold-now\">${excursionsNow[i].post_title}</b><br>\n                    ${croDate(excursionsNow[i].starttime)} - ${croDate(excursionsNow[i].endtime)}<br>\n                    Izlet organizira: ${excursionsNow[i].display_name}<br>\n                    Planirano osoba: ${excursionsNow[i].limitation}`,\n                        ).on('mouseover', () => {\n                            markers[excursionsNow[i].id].setIcon(nowIconActive);\n                        }).on('mouseout', () => {\n                            markers[excursionsNow[i].id].setIcon(nowIcon);\n                        });\n                        nowLayer.addLayer(markers[excursionsNow[i].id]);\n                    }\n                }\n                nowLayer.addTo(map);\n                \n                for (let i = 0; i < excursionsNew.length; i++) {\n                    if ((excursionsNew[i].longitude !== '')\n                        && (excursionsNew[i].longitude !== '0')\n                    ) {\n                        markers[excursionsNew[i].id] = L.marker(\n                            [excursionsNew[i].latitude, excursionsNew[i].longitude],\n                            {\n                                icon: newIcon,\n                                id: excursionsNew[i].id,\n                                old: false,\n                                now: false,\n                            },\n                        );\n                        markers[excursionsNew[i].id].bindPopup(\n                            `<b class=\"leaflet-popup-bold-new\">${excursionsNew[i].post_title}</b><br>\n                    ${croDate(excursionsNew[i].starttime)} - ${croDate(excursionsNew[i].endtime)}<br>\n                    Izlet organizira: ${excursionsNew[i].display_name}<br>\n                    Planirano osoba: ${excursionsNew[i].limitation}`,\n                        ).on('mouseover', () => {\n                            markers[excursionsNew[i].id].setIcon(newIconActive);\n                        }).on('mouseout', () => {\n                            markers[excursionsNew[i].id].setIcon(newIcon);\n                        });\n                        newLayer.addLayer(markers[excursionsNew[i].id]);\n                    }\n                }\n                newLayer.addTo(map);\n                const eOffset = $('#excursions').offset();\n\n                bounds = map.getSize();\n                if ($(window).width() > 1080) {\n                    if (response === true) {\n                        bounds = [eOffset.left, map.getSize().y];\n                    }\n                }\n                L.edgeMarker({\n                    icon: nowIcon,\n                    rotateIcons: true,\n                    layerGroup: nowLayer,\n                    findEdge() {\n                        return L.bounds([0, 0], bounds);\n                    },\n                }).addTo(map);\n                L.edgeMarker({\n                    icon: newIcon,\n                    rotateIcons: true,\n                    layerGroup: newLayer,\n                    findEdge() {\n                        return L.bounds([0, 0], bounds);\n                    },\n                }).addTo(map);\n\n                const oldEdgeMarkers = L.edgeMarker({\n                    icon: oldIcon,\n                    rotateIcons: true,\n                    layerGroup: oldLayer,\n                    findEdge() {\n                        return L.bounds([0, 0], bounds);\n                    },\n                });\n                oldEdgeMarkers.addTo(map);\n\n                map.on('popupopen', (e) => {\n                    const marker = e.popup._source.options;\n                    const target = $(`#excursion-${marker.id}`);\n                    console.log(target);\n                    target.addClass('active');\n                    if (marker.old) {\n                        $('.excursion-new-container').hide();\n                        $('.excursion-old-container').show();\n                        $('.button-excursion-old').addClass('active');\n                        $('.button-excursion-new').removeClass('active');\n                        $('.excursion-gradient').addClass('old');\n                        $('#excursions').addClass('excursions-old');\n                        const topPos = target.position().top;\n                        $('.excursion-old-container').scrollTop(topPos);\n                    } else {\n                        $('.excursion-old-container').hide();\n                        $('.excursion-new-container').show();\n                        $('.button-excursion-new').addClass('active');\n                        $('.button-excursion-old').removeClass('active');\n                        $('.excursion-gradient').removeClass('old');\n                        $('#excursions').removeClass('excursions-old');\n                        const topPos = target.position().top;\n                        $('.excursion-new-container').scrollTop(topPos);\n                    }\n                });\n                map.on('popupclose', () => {\n                    $('.excursion').removeClass('active');\n                });\n                let panTimeout;\n                $('.excursion').hover(\n                    (e) => {\n                        const getMarker = $(e.currentTarget).data('marker');\n                        const marker = markers[getMarker.id];\n                        if (marker.options.old) {\n                            marker.setIcon(oldIconActive);\n                        } else if (marker.options.now) {\n                            marker.setIcon(nowIconActive);\n                        } else {\n                            marker.setIcon(newIconActive);\n                        }\n                        panTimeout = setTimeout(() => {\n                            map.panTo(marker.getLatLng());\n                        }, 1000);\n                    },\n                    (e) => {\n                        const getMarker = $(e.currentTarget).data('marker');\n                        const marker = markers[getMarker.id];\n                        if (marker.options.old) {\n                            marker.setIcon(oldIcon);\n                        } else if (marker.options.now) {\n                            marker.setIcon(nowIcon);\n                        } else {\n                            marker.setIcon(newIcon);\n                        }\n                        clearTimeout(panTimeout);\n                    },\n                );\n\n                $('.excursion-block-btn').on('click', (e) => {\n                    $(e.currentTarget).hide();\n                    $('.excursion-block-search-btn').css('display', 'block');\n                    $('.excursion-block-search').animate({\n                        height: 'toggle',\n                        opacity: 'toggle',\n                    }, 'fast');\n                });\n\n                $('#excursion-block-search-form').submit((e) => {\n                    e.preventDefault();\n                    const form = (e.currentTarget);\n                    const formData = new FormData(form);\n                    formData.append('action', 'excursion_search');\n                    oldLayer.remove();\n                    oldEdgeMarkers.destroy();\n                    searchLayer.remove();\n                    searchEdgeMarkers.destroy();\n\n                    jQuery.ajax({\n                        url: rkgScript.ajaxUrl,\n                        type: 'POST',\n                        contentType: false,\n                        processData: false,\n                        dataType: 'json',\n                        data: formData,\n                        success(response) {\n                            console.log(response);\n                            $('.excursion-old-container-list-serarch').html(response.html);\n                            $('.excursion-old-container-list-serarch').show();\n                            $('.excursion-old-container-list').hide();\n                            searchLayer = L.layerGroup();\n                            for (let i = 0; i < response.cords.length; i++) {\n                                markers[response.cords[i].id] = L.marker(\n                                    [response.cords[i].latitude, response.cords[i].longitude],\n                                    {\n                                        icon: oldIcon,\n                                        id: response.cords[i].id,\n                                        old: true,\n                                        now: false,\n                                    },\n                                );\n                                markers[response.cords[i].id].bindPopup(\n                                    `<b class=\"leaflet-popup-bold-old\">${response.cords[i].post_title}</b><br>\n                    ${croDate(response.cords[i].starttime)} - ${croDate(response.cords[i].endtime)}<br>\n                    Izlet organizira: ${response.cords[i].display_name}<br>\n                    Planirano osoba: ${response.cords[i].limitation}`,\n                                ).on('mouseover', () => {\n                                    markers[response.cords[i].id].setIcon(oldIconActive);\n                                }).on('mouseout', () => {\n                                    markers[response.cords[i].id].setIcon(oldIcon);\n                                });\n                                searchLayer.addLayer(markers[response.cords[i].id]);\n                            }\n                            searchLayer.addTo(map);\n                            searchEdgeMarkers = L.edgeMarker({\n                                icon: oldIcon,\n                                rotateIcons: true,\n                                layerGroup: searchLayer,\n                                findEdge() {\n                                    return L.bounds([0, 0], bounds);\n                                },\n                            });\n                            searchEdgeMarkers.addTo(map);\n                        },\n                    });\n                });\n\n                $('.button-excursion-new').on('click', () => {\n                    oldLayer.addTo(map);\n                    oldEdgeMarkers.addTo(map);\n                    searchLayer.remove();\n                    searchEdgeMarkers.destroy();\n                    $('.excursion-block-btn').css('display', 'block');\n                    $('.excursion-block-search-btn').css('display', 'none');\n                    $('.excursion-block-search').hide();\n                    $('.excursion-old-container-list-serarch').hide();\n                    $('.excursion-old-container-list').show();\n                    $('.excursion-old-container').hide();\n                    $('.excursion-new-container').show();\n                    $('.button-excursion-new').addClass('active');\n                    $('.button-excursion-old').removeClass('active');\n                    $('.excursion-gradient').removeClass('old');\n                    $('#excursions').removeClass('excursions-old');\n                });\n\n                $('.button-excursion-old').on('click', () => {\n                    oldLayer.addTo(map);\n                    oldEdgeMarkers.addTo(map);\n                    searchLayer.remove();\n                    searchEdgeMarkers.destroy();\n                    $('.excursion-block-btn').css('display', 'block');\n                    $('.excursion-block-search-btn').css('display', 'none');\n                    $('.excursion-block-search').hide();\n                    $('.excursion-old-container-list-serarch').hide();\n                    $('.excursion-old-container-list').show();\n                    $('.excursion-new-container').hide();\n                    $('.excursion-old-container').show();\n                    $('.button-excursion-old').addClass('active');\n                    $('.button-excursion-new').removeClass('active');\n                    $('.excursion-gradient').addClass('old');\n                    $('#excursions').addClass('excursions-old');\n                });\n\n                $('.buton-excursion-mobile').on('click', (e) => {\n                    oldLayer.addTo(map);\n                    oldEdgeMarkers.addTo(map);\n                    searchLayer.remove();\n                    searchEdgeMarkers.destroy();\n                    $('.excursion-block-btn').css('display', 'block');\n                    $('.excursion-block-search-btn').css('display', 'none');\n                    $('.excursion-block-search').hide();\n                    $('.excursion-old-container-list-serarch').hide();\n                    if ($(e.currentTarget).hasClass('old')) {\n                        $(e.currentTarget).removeClass('old');\n                        $(e.currentTarget).addClass('new');\n                        $('.excursion-old-container-list').show();\n                        $('.excursion-new-container').hide();\n                        $('.excursion-old-container').show();\n                        $('.button-excursion-old').addClass('active');\n                        $('.button-excursion-new').removeClass('active');\n                        $('.excursion-gradient').addClass('old');\n                        $('#excursions').addClass('excursions-old');\n                    } else {\n                        $(e.currentTarget).removeClass('new');\n                        $(e.currentTarget).addClass('old');\n                        $('.excursion-old-container-list').show();\n                        $('.excursion-old-container').hide();\n                        $('.excursion-new-container').show();\n                        $('.button-excursion-new').addClass('active');\n                        $('.button-excursion-old').removeClass('active');\n                        $('.excursion-gradient').removeClass('old');\n                        $('#excursions').removeClass('excursions-old');\n                    }\n                });\n            }\n        } catch (e) {\n            console.error(\"Error while handling excursion map: \", e.message);\n        }\n    }\n\n    if ($('#rkg-admin-map').length) {\n        const newIcon = L.divIcon(\n            {className: 'leaflet-div-icon', iconSize: [14, 14]},\n        );\n        let mapAdmin;\n        let marker;\n\n        if ($('input[name=latitude]').val()) {\n            mapAdmin = L.map('rkg-admin-map').setView(\n                [$('input[name=latitude]').val(), $('input[name=longitude]').val()],\n                15,\n            );\n            mapAdmin.addLayer(layer);\n            marker = L.marker(\n                [$('input[name=latitude]').val(), $('input[name=longitude]').val()],\n                {icon: newIcon},\n            ).addTo(mapAdmin);\n            mapAdmin.addLayer(marker);\n        } else {\n            mapAdmin = L.map('rkg-admin-map').setView([44.7, 15], 6);\n            mapAdmin.addLayer(layer);\n        }\n\n        const geocoderControlOptions = {\n            bounds: false, // To not send viewbox\n            markers: false, // To not add markers when we geocoder\n            panToPoint: false, // Since no maps, no need to pan the map to the geocoded-selected location\n        };\n\n        L.control.geocoder('bd35a36b680bdf', geocoderControlOptions).addTo(mapAdmin)\n            .on('select', (e) => {\n                if (marker) {\n                    mapAdmin.removeLayer(marker);\n                }\n                mapAdmin.setView(e.latlng, 15);\n                marker = new L.Marker(e.latlng, {icon: newIcon});\n                mapAdmin.addLayer(marker);\n                $('input[name=latitude]').val(e.latlng.lat);\n                $('input[name=longitude]').val(e.latlng.lng);\n            });\n\n        mapAdmin.on('click', (e) => {\n            if (marker) {\n                mapAdmin.removeLayer(marker);\n            }\n            marker = new L.Marker(e.latlng, {icon: newIcon});\n            mapAdmin.addLayer(marker);\n            $('input[name=latitude]').val(e.latlng.lat);\n            $('input[name=longitude]').val(e.latlng.lng);\n        });\n\n        mapAdmin.setMinZoom(3);\n        mapAdmin.setZoom(8);\n    }\n\n    if ($('#rkg-excursion-map').length) {\n        const lat = $('#rkg-excursion-map').data('lat');\n        const long = $('#rkg-excursion-map').data('long');\n        const newIcon = L.divIcon(\n            {className: 'new-div-icon', iconSize: [14, 14]},\n        );\n\n        const mapExcursion = L.map('rkg-excursion-map', {\n            attributionControl: false,\n            zoomControl: false,\n            zoomSnap: 0.5,\n            gestureHandling: true,\n            gestureHandlingOptions: {\n                text: {\n                    touch: 'Koristi dva prsta za mapu',\n                    scroll: 'ctrl + scroll',\n                    // scrollMac: \"\\u2318 + scroll\"\n                },\n            },\n        }).setView(\n            [lat, long],\n            15,\n        );\n        const marker = L.marker(\n            [lat, long],\n            {icon: newIcon},\n        ).addTo(mapExcursion);\n        mapExcursion.addLayer(layer);\n        mapExcursion.addLayer(marker);\n    }\n\n    $('#rkg_category').on('change', () => {\n        $('#title-prompt-text').hide();\n        const template = $('#rkg_category option:selected').data('template');\n        const category = $('#rkg_category option:selected').val();\n        $('#title').val(template.name);\n        $('#rkg-location').val(template.location);\n        $('#rkg-terms').val(template.terms);\n        $('#rkg-price').val(template.price);\n        $('#rkg-limitation').val(template.limitation);\n        if ($('#wp-content-wrap').hasClass('html-active')) {\n            $('#content').val(template.description);\n        } else {\n            const activeEditor = tinyMCE.get('content');\n            if (activeEditor !== null) {\n                activeEditor.setContent(template.description\n                    .replace(/\\n\\s*\\n/g, '\\n').replace(\n                        // eslint-disable-next-line no-control-regex\n                        new RegExp('\\r?\\n', 'g'), '<br />',\n                    ));\n            }\n        }\n\n        $('#rkg_organiser').children().removeAttr('selected');\n        $('.instructor-option').hide();\n        $(`#instructor-${category}`).show();\n        $('#instructor-none').attr('selected', 'selected');\n    });\n\n    $('.course-terms-control').on('click', () => {\n        $('.course-terms').toggle();\n        $('.course-terms-up').toggle();\n        $('.course-terms-down').toggle();\n    });\n\n    $('.rkg-course-slick').slick({\n        infinite: true,\n        slidesToShow: 3,\n        slidesToScroll: 3,\n        prevArrow: $('.rkg-course-chevron-left'),\n        nextArrow: $('.rkg-course-chevron-right'),\n        responsive: [\n            {\n                breakpoint: 1081,\n                settings: {\n                    // centerMode: true,\n                    slidesToShow: 1,\n                    slidesToScroll: 1,\n                    // centerPadding: '25%',\n                },\n            },\n        ],\n    });\n\n    $('#rkg-starttime').on('change', (e) => {\n        const min = $(e.currentTarget).val();\n        $('#rkg-endtime').attr('min', min);\n    });\n\n    $('.course-block-select').on('click', (e) => {\n        e.preventDefault();\n        const target = $(e.currentTarget).data('target');\n        $('.course-block-terms').not(`#course-block-terms-${target}`).hide();\n        $(`#course-block-terms-${target}`).animate({\n            height: 'toggle',\n            opacity: 'toggle',\n        }, 'fast');\n    });\n\n    $(document).on('mouseup', (e) => {\n        if (!$('.course-block-select').is(e.target)\n            && $('.course-block-terms').has(e.target).length === 0) {\n            $('.course-block-terms').hide();\n        }\n    });\n\n    $('.course-block-term').on('click', (e) => {\n        e.preventDefault();\n        const target = $(e.currentTarget).data('target');\n        const id = $(e.currentTarget).data('id');\n        const link = $(e.currentTarget).data('link');\n        const date = $(e.currentTarget).data('date');\n        const title = $(e.currentTarget).data('title');\n        const content = $(e.currentTarget).data('content');\n        const signdate = $(e.currentTarget).data('signdate');\n        const signclass = $(e.currentTarget).data('signclass');\n        const signtext = $(e.currentTarget).data('signtext');\n        $(`#course-block-link-${target}`).attr('href', link);\n        $(`#course-block-link-more-${target}`).attr('href', link);\n        $(`#course-block-date-${target}`).text(date);\n        $(`#course-block-title-${target}`).text(title);\n        $(`#course-block-content-${target}`).text(content);\n        $(`#course-block-signup-${target}`).removeClass();\n        $(`#course-block-signup-${target}`).addClass(signclass);\n        $(`#course-block-signup-${target}`).text(signtext);\n        $(`#course-block-signup-${target}`).attr('data-course', id);\n        $(`#course-block-signup-${target}`).attr('data-name', title);\n        $(`#course-block-signup-${target}`).attr('data-date', signdate);\n        $(`#course-block-terms-${target}`).animate({\n            height: 'toggle',\n            opacity: 'toggle',\n        }, 'fast');\n        window.location = link;\n    });\n\n    $('body').on('change', '#file', (e) => {\n        const fileData = $(e.currentTarget).prop('files')[0];\n        const userData = $('#userId').val();\n        const formData = new FormData();\n        formData.append('file', fileData);\n        formData.append('user', userData);\n        formData.append('action', 'file_upload');\n\n        jQuery.ajax({\n            url: rkgScript.ajaxUrl,\n            type: 'POST',\n            contentType: false,\n            processData: false,\n            data: formData,\n            success(response) {\n                $('#brevetShow').attr('src', response);\n            },\n        });\n    });\n\n    $('body').on('click', '.rkg-news-category', (e) => {\n        const category = $(e.currentTarget).attr('data-id');\n        const formData = new FormData();\n        formData.append('id', category);\n        formData.append('action', 'news_block_update');\n\n        jQuery.ajax({\n            url: rkgScript.ajaxUrl,\n            type: 'POST',\n            contentType: false,\n            processData: false,\n            data: formData,\n            dataType: 'json',\n            success(response) {\n                $('.rkg-category-container').html(response.category);\n                $('.news-content-container').fadeOut('fast').promise().done(() => {\n                    $('.news-content-container').html(response.content).fadeIn('fast');\n                });\n            },\n            error(error) {\n                console.log(error);\n            },\n        });\n    });\n\n    $('.rkg-category-container').on('click', '.rkg-news-category-select', (e) => {\n        e.preventDefault();\n        const target = $(e.currentTarget).data('target');\n        $('.rkg-news-category-select-arrow').toggleClass('up');\n        $('.rkg-news-category, .rkg-news-category-link').animate({\n            height: 'toggle',\n            opacity: 'toggle',\n        }, 'fast');\n    });\n\n    $('#misc-publishing-actions').after($('#cancle_excursion'));\n\n    $('#titlediv').before($('#rkg_category_table'));\n\n    $('#rkg_excursion_data_metabox, #rkg_course_data_metabox').detach().appendTo('#prenormal-sortables');\n\n    //// ***** Reservation / Inventory\n\n    $('.new-inventory-icon').on('click', (e) => {\n        $(e.currentTarget).hide();\n        $(e.currentTarget).next().show();\n    });\n\n    // Reservation and inventory validation\n    let inventoryHasValidationErrors = false;\n\n    $('.reservations-blocklet input[type=text]').on('focus', (e) => {\n        $(e.currentTarget).removeClass('hasErrors');\n        $(e.currentTarget).removeClass('noErrors');\n    }).on('blur', (e) => {\n        const id = $(e.currentTarget).val();\n        if (id.trim().length === 0) {\n            // User probably misclicked, string is empty\n            return;\n        }\n\n        const type = $(e.currentTarget).attr('name');\n        if (type === \"lead\") {\n            return;\n        }\n\n        $.ajax({\n            type: 'POST',\n            dataType: 'json',\n            url: rkgScript.ajaxUrl,\n            data: {\n                action: 'check_inventory',\n                id,\n                type,\n            },\n            success: (data) => {\n                if (data !== \"ok\") {\n                    inventoryHasValidationErrors = true;\n                    $(e.currentTarget).addClass('hasErrors');\n                } else {\n                    $(e.currentTarget).removeClass('hasErrors'); \n                    $(e.currentTarget).addClass('noErrors');\n                    inventoryHasValidationErrors = false;\n                }\n            },\n            error(error) {\n                console.log(error);\n            },\n        });\n    });\n    $('label[for=role]').parent().parent().remove();\n\n    // Saving equipment reservations\n    $('.reservation-save').on('click', (e) => {\n        if (inventoryHasValidationErrors) {\n            return;\n        }\n        e.target.disabled = true;\n\n        const reservationId = e.target.getAttribute(\"data-id\");\n        const data = new FormData();\n        data.append('reservation', reservationId);\n\n        const reservationEl = $(e.target).parent().parent();\n        data.append('user_id', reservationEl.children('.column-user_id').text());\n        const definitions = ['mask', 'regulator', 'suit', 'boots', 'gloves', 'fins', 'bcd', 'lead'];\n        definitions.forEach(item => {\n            const itemEl = reservationEl.find('.column-'+item+' input');\n            if (itemEl.is(\":visible\")) {\n                // Write new input value\n                data.append(item, itemEl.val());\n            } else {\n                // Write return status \n                const statusEl = reservationEl.find('.column-'+item+' select');\n                data.append(item+'_returned', statusEl.val());\n            }\n        });\n\n        const comment = reservationEl.find('.column-comment textarea');;\n        data.append('other', comment.val());\n\n        data.append('action', 'edit_reservation');\n        jQuery.ajax({\n            url: rkgScript.ajaxUrl,\n            type: 'POST',\n            contentType: false,\n            processData: false,\n            dataType: 'json',\n            data,\n            success: () => {\n                location.reload();\n            },\n            error(response) {\n                if (response != \"ok\") {\n                    $('#error-message').removeClass(\"hidden\");\n                    $('#error-text').append(response.responseText);\n                    $('#error-text').removeClass(\"hidden\");\n                    $('input.button').attr('disabled', false);   \n                }\n            }\n        });\n    });\n\n    $('#custom-new-reservation').on('submit', (e) => {\n        e.preventDefault();\n\n        if (!inventoryHasValidationErrors) {\n            $('input.button').attr('disabled', true);\n\n            const form = (e.currentTarget);\n            const formData = new FormData(form);\n            formData.append('action', 'add_custom_reservation');\n\n            jQuery.ajax({\n                url: rkgScript.ajaxUrl,\n                type: 'POST',\n                contentType: false,\n                processData: false,\n                dataType: 'json',\n                data: formData,\n                success() {\n                    window.location.href=\"/wp/wp-admin/admin.php?page=reservations\";\n                },\n                error(response) {\n                    $('#error-message').removeClass(\"hidden\");\n                    $('#error-text').append(response.responseText);\n                    $('#error-text').removeClass(\"hidden\");\n                    $('input.button').attr('disabled', false);\n                }\n            });\n        }\n    });\n\n    if ($('#guest_meta_check').prop('checked') == true) {\n        $('#guest_count_row').show();\n    }\n\n    $('#guest_meta_check').on('change', (e) => {\n        if ($(e.currentTarget).prop('checked') == true) {\n            $('#guest_count_row').show();\n        } else if ($(e.currentTarget).prop('checked') == false) {\n            $('#guest_count_row').hide();\n        }\n    });\n\n    $('.rkg-popover-control').on('click', (e) => {\n        $('.rkg-popover').not($(e.currentTarget).next()).hide();\n        $(e.currentTarget).next().toggle();\n    });\n\n    $('#niid, .preSignupSelect').select2();\n\n    $('.rkg-admin-switch').on('click', (e) => {\n        const id = $(e.currentTarget).attr('id');\n        $(e.currentTarget).toggleClass(\n            'dashicons-arrow-down-alt2 dashicons-arrow-up-alt2',\n        );\n        $(`#${id}-block`).toggle();\n    });\n\n    $('.rkg-show-map').on('click', (e) => {\n        e.preventDefault();\n        $(e.currentTarget).toggleClass('on off');\n        $('#excursions').toggleClass('excursions-map-off');\n    });\n\n    $('.rkg-toggler, .rkg-toggler-title').on('click', (e) => {\n        if ($(e.currentTarget).css('cursor') === 'pointer') {\n            const toggle = $(e.currentTarget).data('toggle');\n            $(e.currentTarget).find('i').toggleClass(\n                'fa-chevron-down fa-chevron-up',\n            );\n            $(`#${toggle}`).toggle();\n        }\n    });\n});\n"]}